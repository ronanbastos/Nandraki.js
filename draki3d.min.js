class ThreeCore{constructor(){if(ThreeCore.instance)return ThreeCore.instance;this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),ThreeCore.instance=this}init(e){e.appendChild(this.renderer.domElement),this.animate()}animate(){requestAnimationFrame((()=>this.animate())),this.scene.traverse((e=>{e.userData.scripts&&e.userData.scripts.forEach((t=>t(e)));const t=e.userData.components||{};for(let n in t){const r=t[n];"function"==typeof r.update&&r.update(e)}})),this.renderer.render(this.scene,this.camera)}}class ThreeFactory{createLight(){return new THREE.PointLight(16777215,1)}createCube(){const e=new THREE.BoxGeometry,t=new THREE.MeshStandardMaterial({color:65280});return new THREE.Mesh(e,t)}createCamera(){return new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,1e3)}}class EntityBuilder{constructor(){this.entity=new THREE.Object3D}addMesh(e){return this.entity.add(e),this}setPosition(e,t,n){return this.entity.position.set(e,t,n),this}build(){return this.entity}}class PrototypeFactory{constructor(){this.prototypes={}}register(e,t){this.prototypes[e]=t}clone(e){return this.prototypes[e]?.clone()??null}}class ComponentRegistry{static components={};static register(e,t){this.components[e]=t}static instantiate(e,...t){const n=this.components[e];return n?new n(...t):null}}const TagSystem={add(e,t){e.userData.tags||(e.userData.tags=new Set),e.userData.tags.add(t)},has:(e,t)=>e.userData.tags?.has(t)??!1,remove(e,t){e.userData.tags?.delete(t)},getAll(e){const t=new ThreeCore,n=[];return t.scene.traverse((t=>{t.userData.tags?.has(e)&&n.push(t)})),n}};class Game{static create(e,t=null){const n=new ThreeFactory,r={cube:"createCube",camera:"createCamera",light:"createLight"}[e];if(!r||"function"!=typeof n[r])throw new Error(`Tipo de objeto desconhecido: "${e}"`);const s=n[r]();return t&&(s.name=t),s}}function drak(e){const t=(new ThreeCore).scene.getObjectByName(e);return t?{set(e,n){const r=e.split(".");let s=t;for(;r.length>1;)s=s[r.shift()];s[r[0]]=n},get(e){const n=e.split(".");let r=t;for(let e of n)r=r[e];return r},script(e){t.userData.scripts||(t.userData.scripts=[]),t.userData.scripts.push(e)},component:e=>t.userData?.components?.[e]??null,addComponent(e,n){t.userData.components||(t.userData.components={}),t.userData.components[e]=n},removeComponent(e){t.userData.components&&delete t.userData.components[e]},addTag(e){TagSystem.add(t,e)},removeTag(e){TagSystem.remove(t,e)},hasTag:e=>TagSystem.has(t,e)}:(console.warn(`Objeto "${e}" n√£o encontrado`),null)}function getByTag(e){return TagSystem.getAll(e)}